function applyFilter(e){document.getElementById("searchInput").value=e.textContent,filterData()}function clearFilters(){document.getElementById("searchInput").value="",document.getElementById("startDate").value="",document.getElementById("endDate").value="",document.getElementById("dateRangeSelector").value="",document.getElementById("customDateRange").style.display="none",currentSearchFilter="",currentStartDateFilter=null,currentEndDateFilter=null,applyFiltersAndRefresh()}function sortTable(e){let t,a,n,r,l,s,c,u,D=0;for(t=document.getElementById("trackingData"),n=!0,u="asc";n;){for(n=!1,a=t.rows,r=1;r<a.length-1;r++)if(c=!1,l=a[r].getElementsByTagName("TD")[e],s=a[r+1].getElementsByTagName("TD")[e],"asc"==u){if(l.innerHTML.toLowerCase()>s.innerHTML.toLowerCase()){c=!0;break}}else if("desc"==u&&l.innerHTML.toLowerCase()<s.innerHTML.toLowerCase()){c=!0;break}c?(a[r].parentNode.insertBefore(a[r+1],a[r]),n=!0,D++):0==D&&"asc"==u&&(u="desc",n=!0)}let i=[];for(let e=1;e<t.rows.length;e++)i.push(trackingData[t.rows[e].rowIndex-1])}function filterData(){currentSearchFilter=document.getElementById("searchInput").value.toLowerCase(),applyFiltersAndRefresh()}function filterDataByDate(){const e=document.getElementById("startDate").value,t=document.getElementById("endDate").value;e&&t?(currentStartDateFilter=new Date(e),currentEndDateFilter=new Date(t),isNaN(currentStartDateFilter.getTime())||isNaN(currentEndDateFilter.getTime())?(currentStartDateFilter=null,currentEndDateFilter=null):currentEndDateFilter.setDate(currentEndDateFilter.getDate()+1)):(currentStartDateFilter=null,currentEndDateFilter=null),applyFiltersAndRefresh()}document.getElementById("dateRangeSelector").addEventListener("change",(function(){const e=this.value;let t,a;const n=document.getElementById("customDateRange");if("custom"===e)return void(n.style.display="block");n.style.display="none";const r=new Date;switch(e){case"last24Hours":t=new Date(r.getTime()-864e5),a=r;break;case"yesterday":t=new Date(r.getFullYear(),r.getMonth(),r.getDate()-1),a=new Date(r.getFullYear(),r.getMonth(),r.getDate()-1);break;case"thisYear":t=new Date(r.getFullYear(),0,1),a=new Date(r.getFullYear(),11,31);break;case"allTime":a=new Date,t=new Date(a),t.setDate(a.getDate()-1e4);break;case"today":t=a=new Date;break;case"thisWeek":t=new Date,t.setDate(t.getDate()-t.getDay()),a=new Date(t),a.setDate(a.getDate()+6);break;case"last7Days":a=new Date,t=new Date(a),t.setDate(a.getDate()-6);break;case"thisMonth":t=new Date,t.setDate(1),a=new Date(t),a.setMonth(a.getMonth()+1),a.setDate(0);break;case"last30Days":a=new Date,t=new Date(a),t.setDate(a.getDate()-29);break;case"last90Days":a=new Date,t=new Date(a),t.setDate(a.getDate()-89);break;default:t=a=null,clearFilters()}t&&a&&(document.getElementById("startDate").value=t.toISOString().split("T")[0]||null,document.getElementById("endDate").value=a.toISOString().split("T")[0]||null,filterDataByDate())})),document.getElementById("startDate").addEventListener("change",filterDataByDate),document.getElementById("endDate").addEventListener("change",filterDataByDate);let searchInput=document.getElementById("searchInput"),searchTimeout=null;searchInput.addEventListener("keyup",(function(e){clearTimeout(searchTimeout),searchTimeout=setTimeout((function(){filterData()}),350)}));